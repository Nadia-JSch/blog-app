---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';

const posts = await getCollection('experiments', (p) => !p.data.draft);
const sorted = posts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<BaseLayout title="Experiments - pg of code">
  <header class="page-header">
    <h1>Experiments</h1>
    <p>Hands-on CSS experiments and visual demos. Learning by playing.</p>
  </header>

  <div class="post-list">
    {sorted.map((post) => (
      <PostCard
        title={post.data.title}
        date={post.data.date}
        description={post.data.description}
        url={`/experiments/${post.id}`}
        tags={post.data.tags}
      />
    ))}
  </div>
</BaseLayout>

<style>
  .page-header {
    margin-bottom: 2.5rem;
  }

  .page-header h1 {
    font-size: 2.2rem;
    color: var(--text-heading);
    margin-bottom: 0.5rem;
  }

  .page-header p {
    color: var(--text-light);
    font-size: 1.05rem;
  }

  .post-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
</style>
